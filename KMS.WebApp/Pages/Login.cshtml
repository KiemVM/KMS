@page

@model LoginModel
@{
    ViewData["Title"] = "Đăng nhập hệ thống";
    Layout = "_LayoutForm";
}
<div class="d-flex flex-center flex-column flex-lg-row-fluid">
    <div class="w-lg-500px p-10" style="width:100%">
        <form onsubmit="Login(event)" class="form w-100" novalidate="novalidate">
            <div class="text-center mb-11">
                <h1 class="text-dark fw-bolder fs-2qx mb-3">Đăng nhập hệ thống</h1>
            </div>
            <div class="fv-row mb-3 row  me-0">
                <div class="col-lg-12 form-control form-control-floating card" style="padding-right: 0;">
                    <input placeholder="none" type="text" class="form-input" id="UserName" autocomplete="off">
                    <label class="form-label" for="UserName">Tên đăng nhập</label>
                </div>
            </div>
            <div class="fv-row mb-3" data-kt-password-meter="true">
                <div class="row me-0">
                    <div class="position-relative form-control-floating form-control col-lg-12" style="padding-right: 0">
                        <input class="form-input" type="password" placeholder="none" autocomplete="off" id="Password">
                        <label class="form-label" for="Password">Mật khẩu</label>
                        <span class="btn btn-sm btn-icon position-absolute translate-middle top-50 end-0 me-n2" data-kt-password-meter-control="visibility" style="padding-bottom: 10px;">
                            <i class="ki-outline ki-eye-slash fs-2 text-dark"></i>
                            <i class="ki-outline ki-eye fs-2 d-none text-dark"></i>
                        </span>
                    </div>
                </div>
            </div>
            <div class="d-flex flex-stack flex-wrap gap-3 fs-base fw-semibold mb-8">
                <div></div>
                <a href="" class="link-primary">Quên mật khẩu ?</a>
            </div>
            <div class="d-grid mb-10">
                <button type="submit" class="btn btn-lg btn-primary fw-bolder w-100">
                    <span class="indicator-label">Đăng nhập</span>
                </button>
            </div>
        </form>
    </div>
</div>
<script type="text/javascript">
    function Login(event) {
        event.preventDefault();
        var returnUrl = "@Model.ReturnUrl";
        window.objAjax.parameters = {
            UserName: $("#UserName").val().trim(),
            Password: $("#Password").val().trim()
        };
        window.objAjax.divLoading = "body";
        window.objAjax.isFuntConfirm = true;
        AjaxPostAsync("/Api/Auth/Login", window.objAjax,
            function (data) {
                if (returnUrl === "")
                    window.location.href = "/cong-ty";
                else
                    window.location.href = returnUrl;
            });
    }
</script>